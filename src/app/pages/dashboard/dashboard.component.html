<app-sidebar></app-sidebar>
<app-menu></app-menu>

<section id="dashboard">
  <header class="topo-dashboard">
    <div class="dashboard-topo">
      <div class="boas-vindas">
        <p>Seja bem-vindo, <span class="usuario-nome">Varejão</span></p>
      </div>
      <div class="seletor-mes">
        <select [(ngModel)]="mesSelecionado" name="mesSelecionado">
          <option *ngFor="let mes of meses" [value]="mes">{{ mes }}</option>
        </select>
      </div>
    </div>
  </header>

  <div class="container-dashboard">
    <!-- LADO ESQUERDO -->
    <div class="lado-esquerdo" cdkDropList (cdkDropListDropped)="dropEsquerda($event)">
      <!-- Minhas cinco principais despesas -->
      <div
        class="card-dashboard"
        id="despesasPrincipais"
        cdkDrag
      >
        <div class="cabecalho-card despesas-card" (click)="toggleDespesasPrincipais()">
          <span>Minhas cinco principais despesas</span>
          <i
            class="bi bi-trash-fill"
            (click)="abrirConfirmacao('despesas'); $event.stopPropagation()"
            style="cursor: pointer;"
            title="Remover despesas principais"
          ></i>
        </div>

        <div *ngIf="mostrarDespesasPrincipais && chartOptions" class="wrapper-despesas-com-icones">
          <div class="grafico-despesas">
            <apx-chart 
              [series]="chartOptions.series"   
              [chart]="chartOptions.chart"
              [colors]="chartOptions.colors || []"
              [plotOptions]="chartOptions.plotOptions"
              [dataLabels]="chartOptions.dataLabels"
              [xaxis]="chartOptions.xaxis"
              [yaxis]="chartOptions.yaxis"
              [grid]="chartOptions.grid"
              [fill]="chartOptions.fill"
              [tooltip]="chartOptions.tooltip"
              [legend]="chartOptions.legend"
            ></apx-chart>
          </div>
         

          <div class="icones-despesas">
            <div class="icone-despesa aluguel">   
              <i class="fa fa-car"></i><span></span></div>
            <div class="icone-despesa transporte"><i class="fa fa-home"></i><span></span></div>
            <div class="icone-despesa alimentacao"><i class="bi bi-cash"></i><span></span></div>
            <div class="icone-despesa educacao"><i class="fa fa-graduation-cap"></i><span></span></div>
            <div class="icone-despesa outros"><i class="fa fa-cutlery"></i><span></span></div>
          </div>
        </div>
      </div>

      <!-- Pagamentos a receber -->
      <div
        class="card-dashboard simples"
        id="pagamentosReceber"
        cdkDrag
      >
        <div class="cabecalho-card" (click)="togglePagamentosreceber()">
          <span>Pagamentos a receber</span>
          <i
            class="bi bi-trash-fill"
            (click)="abrirConfirmacao('pagamentos'); $event.stopPropagation()"
            style="cursor: pointer;"
            title="Remover pagamentos a receber"
          ></i>
        </div>
        <div *ngIf="mostrarPagamentosreceber" class="conteudo-card">
          <!-- Conteúdo dos pagamentos a receber -->
        </div>
      </div>

      <!-- Compras parceladas do cartão -->
      <div
        class="card-dashboard simples"
        id="comprasParceladas"
        cdkDrag
      >
        <div class="cabecalho-card" (click)="toggleComprasParceladas()">
          <span>Compras parceladas do cartão</span>
          <i
            class="bi bi-trash-fill"
            (click)="abrirConfirmacao('parceladas'); $event.stopPropagation()"
            style="cursor: pointer;"
            title="Remover compras parceladas"
          ></i>
        </div>
        <div *ngIf="mostrarComprasParceladas" class="conteudo-card">
          <!-- Conteúdo das compras parceladas -->
        </div>
      </div>
    </div>

    <!-- LADO DIREITO -->
    <div class="lado-direito" cdkDropList (cdkDropListDropped)="dropDireita($event)">
      <!-- Meu saldo atual -->
      <div
        class="card-dashboard saldo"
        id="saldoAtual"
        cdkDrag
      >
        <div class="cabecalho-card" (click)="toggleSaldoAtual()">
          <span>Meu saldo atual</span>
          <i
            class="bi bi-trash-fill"
            (click)="abrirConfirmacao('saldo'); $event.stopPropagation()"
            style="cursor: pointer;"
            title="Remover saldo atual"
          ></i>
        </div>
        <div *ngIf="mostrarSaldoAtual" class="saldo-container">
          <div class="saldo-info">
            <p class="saldo-titulo">Saldo Atual</p>
            <h2 class="saldo-valor">
              {{ saldoAtual | currency: 'BRL':'symbol-narrow':'1.2-2' }}
            </h2>
            <p class="saldo-previsto">Saldo Previsto</p>
          </div>
        </div>
      </div>

      <!-- Gráfico do balanço do mês -->
      <div
        class="card-dashboard"
        id="graficoBalanco"
        cdkDrag
      >
        <div class="cabecalho-card" (click)="toggleGraficoBalanco()">
          <span>Gráfico do balanço do mês</span>
          <i
            class="bi bi-trash-fill"
            (click)="abrirConfirmacao('grafico'); $event.stopPropagation()"
            style="cursor: pointer;"
            title="Remover gráfico do balanço"
          ></i>
        </div>
        <div *ngIf="mostrarGraficoBalanco && graficoBalancoMesOptions">
          <apx-chart
            [series]="graficoBalancoMesOptions.series"
            [chart]="graficoBalancoMesOptions.chart"
            [xaxis]="graficoBalancoMesOptions.xaxis"
            [plotOptions]="graficoBalancoMesOptions.plotOptions"
            [dataLabels]="graficoBalancoMesOptions.dataLabels"
            [colors]="graficoBalancoMesOptions.colors"
            [yaxis]="graficoBalancoMesOptions.yaxis"
            [grid]="graficoBalancoMesOptions.grid"
            [fill]="graficoBalancoMesOptions.fill"
            [tooltip]="graficoBalancoMesOptions.tooltip"
            [legend]="graficoBalancoMesOptions.legend"
          ></apx-chart>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de confirmação -->
  <div *ngIf="confirmacaoAberta" class="modal-confirmacao">
    <div class="modal-content">
      <p>Tem certeza que deseja remover <strong>{{ nomeBloco(confirmacaoAberta) }}?</strong></p>
      <button (click)="confirmarExclusao(confirmacaoAberta)">Sim</button>
      <button (click)="cancelarExclusao()">Não</button>
    </div>
  </div>
</section>
